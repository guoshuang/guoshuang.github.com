jQuery(function(u){var E=u("#dropzone"),F=u("#datazone");E.on("dragover",function(u){return u=u.originalEvent,u.dataTransfer.dropEffect="move",!1}),E.on("dragenter",function(){u(this).addClass("dragging")}).on("dragleave",function(){u(this).removeClass("dragging")}).on("drop",function(E){E=E.originalEvent,E.preventDefault&&E.preventDefault(),E.stopPropagation&&E.stopPropagation(),u(this).removeClass("dragging");var C=E.dataTransfer.files;0==C.length||u.each(C,function(E,C){if(-1!=C.type.indexOf("text")){F.append("<dt>文件名："+C.name+" 大小："+C.size+" 类型："+C.type+" 修改时间："+moment(C.lastModifiedDate).fromNow()+"</dt>");var D=new FileReader;D.onloadend=function(u){if(u.target.readyState==FileReader.DONE){var C=D.result;F.find("dt:eq("+E+")").after("<dd><textarea>"+C+"</textarea></dd>")}},D.readAsBinaryString(C)}else if(-1!=C.type.indexOf("json")){console.log("%c json文件，：）","color:red;");try{var D=new FileReader;D.onloadend=function(E){if(E.target.readyState==FileReader.DONE){var C=D.result;u("#jsonzone").append(C),JSON.parse(C),F.html("<textarea>"+C+"</textarea>")}},D.readAsBinaryString(C)}catch(B){alert("json文件有问题")}}else console.log(C.name+" 不是文本文件！")})}),u("#json-output-btn").on("click",function(){var E=u("#jsonzone").val();""==E?alert("还没有内容呢！"):Download.save(E,"file001.json")})});var Download={click:function(u){var E=document.createEvent("MouseEvents");return E.initMouseEvent("click",!0,!1,self,0,0,0,0,0,!1,!1,!1,!1,0,null),u.dispatchEvent(E)},encode:function(u){return"data:application/octet-stream;base64,"+btoa(u)},link:function(u,E){var F=document.createElement("a");return F.download=E||self.location.pathname.slice(self.location.pathname.lastIndexOf("/")+1),F.href=u||self.location.href,F}};Download.save=function(u,E){this.click(this.link(this.encode(u),E))};