//构造省市连选 davidguoshuang at gmail.com 2013-11-17 11:59:44

var weaChina=[{id:10101,name:'北京'},{id:10102,name:'上海'},{id:10103,name:'天津'},{id:10104,name:'重庆'},{id:10105,name:'黑龙江'},{id:10106,name:'吉林'},{id:10107,name:'辽宁'},{id:10108,name:'内蒙古'},{id:10109,name:'河北'},{id:10110,name:'山西'},{id:10111,name:'陕西'},{id:10112,name:'山东'},{id:10113,name:'新疆'},{id:10114,name:'西藏'},{id:10115,name:'青海'},{id:10116,name:'甘肃'},{id:10117,name:'宁夏'},{id:10118,name:'河南'},{id:10119,name:'江苏'},{id:10120,name:'湖北'},{id:10121,name:'浙江'},{id:10122,name:'安徽'},{id:10123,name:'福建'},{id:10124,name:'江西'},{id:10125,name:'湖南'},{id:10126,name:'贵州'},{id:10127,name:'四川'},{id:10128,name:'广东'},{id:10129,name:'云南'},{id:10130,name:'广西'},{id:10131,name:'海南'},{id:10132,name:'香港'},{id:10133,name:'澳门'},{id:10134,name:'台湾'}];
var weaCity=[{id:101010100,name:'北京'},{id:101010300,name:'朝阳'},{id:101010400,name:'顺义'},{id:101010500,name:'怀柔'},{id:101010600,name:'通州'},{id:101010700,name:'昌平'},{id:101010800,name:'延庆'},{id:101010900,name:'丰台'},{id:101011000,name:'石景山'},{id:101011100,name:'大兴'},{id:101011200,name:'房山'},{id:101011300,name:'密云'},{id:101011400,name:'门头沟'},{id:101011500,name:'平谷'},{id:101011600,name:'八达岭'},{id:101011700,name:'佛爷顶'},{id:101011800,name:'汤河口'},{id:101011900,name:'密云上甸子'},{id:101012000,name:'斋堂'},{id:101012100,name:'霞云岭'},{id:101012200,name:'北京城区'},{id:101010200,name:'海淀'},{id:101030100,name:'天津'},{id:101030300,name:'宝坻'},{id:101030400,name:'东丽'},{id:101030500,name:'西青'},{id:101030600,name:'北辰'},{id:101031400,name:'蓟县'},{id:101030800,name:'汉沽'},{id:101030900,name:'静海'},{id:101031000,name:'津南'},{id:101031100,name:'塘沽'},{id:101031200,name:'大港'},{id:101030200,name:'武清'},{id:101030700,name:'宁河'},{id:101020100,name:'上海'},{id:101020300,name:'宝山'},{id:101020500,name:'嘉定'},{id:101020600,name:'南汇'},{id:101021300,name:'浦东'},{id:101020800,name:'青浦'},{id:101020900,name:'松江'},{id:101021000,name:'奉贤'},{id:101021100,name:'崇明'},{id:101021200,name:'徐家汇'},{id:101020200,name:'闵行'},{id:101020700,name:'金山'},{id:101090101,name:'石家庄'},{id:101090301,name:'张家口'},{id:101090402,name:'承德'},{id:101090501,name:'唐山'},{id:101091101,name:'秦皇岛'},{id:101090701,name:'沧州'},{id:101090801,name:'衡水'},{id:101090901,name:'邢台'},{id:101091001,name:'邯郸'},{id:101090201,name:'保定'},{id:101090601,name:'廊坊'},{id:101180101,name:'郑州'},{id:101180301,name:'新乡'},{id:101180401,name:'许昌'},{id:101180501,name:'平顶山'},{id:101180601,name:'信阳'},{id:101180701,name:'南阳'},{id:101180801,name:'开封'},{id:101180901,name:'洛阳'},{id:101181001,name:'商丘'},{id:101181101,name:'焦作'},{id:101181201,name:'鹤壁'},{id:101181301,name:'濮阳'},{id:101181401,name:'周口'},{id:101181501,name:'漯河'},{id:101181601,name:'驻马店'},{id:101181701,name:'三门峡'},{id:101181801,name:'济源'},{id:101180201,name:'安阳'},{id:101220101,name:'合肥'},{id:101220301,name:'芜湖'},{id:101220401,name:'淮南'},{id:101220501,name:'马鞍山'},{id:101220601,name:'安庆'},{id:101220701,name:'宿州'},{id:101220801,name:'阜阳'},{id:101220901,name:'亳州'},{id:101221001,name:'黄山'},{id:101221101,name:'滁州'},{id:101221201,name:'淮北'},{id:101221301,name:'铜陵'},{id:101221401,name:'宣城'},{id:101221501,name:'六安'},{id:101221601,name:'巢湖'},{id:101221701,name:'池州'},{id:101220201,name:'蚌埠'},{id:101210101,name:'杭州'},{id:101211101,name:'舟山'},{id:101210201,name:'湖州'},{id:101210301,name:'嘉兴'},{id:101210901,name:'金华'},{id:101210501,name:'绍兴'},{id:101210601,name:'台州'},{id:101210701,name:'温州'},{id:101210801,name:'丽水'},{id:101211001,name:'衢州'},{id:101210401,name:'宁波'},{id:101040100,name:'重庆'},{id:101040300,name:'合川'},{id:101040400,name:'南川'},{id:101040500,name:'江津'},{id:101040600,name:'万盛'},{id:101040700,name:'渝北'},{id:101040800,name:'北碚'},{id:101040900,name:'巴南'},{id:101041000,name:'长寿'},{id:101041100,name:'黔江'},{id:101041200,name:'万州天城'},{id:101041300,name:'万州龙宝'},{id:101041400,name:'涪陵'},{id:101041500,name:'开县'},{id:101041600,name:'城口'},{id:101041700,name:'云阳'},{id:101041800,name:'巫溪'},{id:101041900,name:'奉节'},{id:101042000,name:'巫山'},{id:101042100,name:'潼南'},{id:101042200,name:'垫江'},{id:101042300,name:'梁平'},{id:101042400,name:'忠县'},{id:101042500,name:'石柱'},{id:101042600,name:'大足'},{id:101042700,name:'荣昌'},{id:101042800,name:'铜梁'},{id:101042900,name:'璧山'},{id:101043000,name:'丰都'},{id:101043100,name:'武隆'},{id:101043200,name:'彭水'},{id:101043300,name:'綦江'},{id:101043400,name:'酉阳'},{id:101043600,name:'秀山'},{id:101043700,name:'沙坪坝'},{id:101040200,name:'永川'},{id:101230101,name:'福州'},{id:101230501,name:'泉州'},{id:101230601,name:'漳州'},{id:101230701,name:'龙岩'},{id:101230509,name:'晋江'},{id:101230901,name:'南平'},{id:101230201,name:'厦门'},{id:101230301,name:'宁德'},{id:101230401,name:'莆田'},{id:101230801,name:'三明'},{id:101160101,name:'兰州'},{id:101160301,name:'平凉'},{id:101160401,name:'庆阳'},{id:101160501,name:'武威'},{id:101160601,name:'金昌'},{id:101161401,name:'嘉峪关'},{id:101160801,name:'酒泉'},{id:101160901,name:'天水'},{id:101161001,name:'武都'},{id:101161101,name:'临夏'},{id:101161201,name:'合作'},{id:101161301,name:'白银'},{id:101160201,name:'定西'},{id:101160701,name:'张掖'},{id:101280101,name:'广州'},{id:101280301,name:'惠州'},{id:101280401,name:'梅州'},{id:101280501,name:'汕头'},{id:101280601,name:'深圳'},{id:101280701,name:'珠海'},{id:101280800,name:'佛山'},{id:101280901,name:'肇庆'},{id:101281001,name:'湛江'},{id:101281101,name:'江门'},{id:101281201,name:'河源'},{id:101281301,name:'清远'},{id:101281401,name:'云浮'},{id:101281501,name:'潮州'},{id:101281601,name:'东莞'},{id:101281701,name:'中山'},{id:101281801,name:'阳江'},{id:101281901,name:'揭阳'},{id:101282001,name:'茂名'},{id:101282101,name:'汕尾'},{id:101280201,name:'韶关'},{id:101300101,name:'南宁'},{id:101300301,name:'柳州'},{id:101300401,name:'来宾'},{id:101300501,name:'桂林'},{id:101300601,name:'梧州'},{id:101301401,name:'防城港'},{id:101300801,name:'贵港'},{id:101300901,name:'玉林'},{id:101301001,name:'百色'},{id:101301101,name:'钦州'},{id:101301201,name:'河池'},{id:101301301,name:'北海'},{id:101300201,name:'崇左'},{id:101300701,name:'贺州'},{id:101260101,name:'贵阳'},{id:101260301,name:'安顺'},{id:101260401,name:'都匀'},{id:101260906,name:'兴义'},{id:101260601,name:'铜仁'},{id:101260701,name:'毕节'},{id:101260801,name:'六盘水'},{id:101260201,name:'遵义'},{id:101260501,name:'凯里'},{id:101290101,name:'昆明'},{id:101290301,name:'红河'},{id:101290601,name:'文山'},{id:101290701,name:'玉溪'},{id:101290801,name:'楚雄'},{id:101290901,name:'普洱'},{id:101291001,name:'昭通'},{id:101291101,name:'临沧'},{id:101291201,name:'怒江'},{id:101291301,name:'香格里拉'},{id:101291401,name:'丽江'},{id:101291501,name:'德宏'},{id:101291601,name:'景洪'},{id:101290201,name:'大理'},{id:101290401,name:'曲靖'},{id:101290501,name:'保山'},{id:101080101,name:'呼和浩特'},{id:101080301,name:'乌海'},{id:101080401,name:'集宁'},{id:101080501,name:'通辽'},{id:101081201,name:'阿拉善左旗'},{id:101080701,name:'鄂尔多斯'},{id:101080801,name:'临河'},{id:101080901,name:'锡林浩特'},{id:101081000,name:'呼伦贝尔'},{id:101081101,name:'乌兰浩特'},{id:101080201,name:'包头'},{id:101080601,name:'赤峰'},{id:101240101,name:'南昌'},{id:101240301,name:'上饶'},{id:101240401,name:'抚州'},{id:101240501,name:'宜春'},{id:101241101,name:'鹰潭'},{id:101240701,name:'赣州'},{id:101240801,name:'景德镇'},{id:101240901,name:'萍乡'},{id:101241001,name:'新余'},{id:101240201,name:'九江'},{id:101240601,name:'吉安'},{id:101200101,name:'武汉'},{id:101200501,name:'黄冈'},{id:101200801,name:'荆州'},{id:101200901,name:'宜昌'},{id:101201001,name:'恩施'},{id:101201101,name:'十堰'},{id:101201201,name:'神农架'},{id:101201301,name:'随州'},{id:101201401,name:'荆门'},{id:101201501,name:'天门'},{id:101201601,name:'仙桃'},{id:101201701,name:'潜江'},{id:101200201,name:'襄樊'},{id:101200301,name:'鄂州'},{id:101200401,name:'孝感'},{id:101200601,name:'黄石'},{id:101200701,name:'咸宁'},{id:101270101,name:'成都'},{id:101270301,name:'自贡'},{id:101270401,name:'绵阳'},{id:101270501,name:'南充'},{id:101270601,name:'达州'},{id:101270701,name:'遂宁'},{id:101270801,name:'广安'},{id:101270901,name:'巴中'},{id:101271001,name:'泸州'},{id:101271101,name:'宜宾'},{id:101271201,name:'内江'},{id:101271301,name:'资阳'},{id:101271401,name:'乐山'},{id:101271501,name:'眉山'},{id:101271601,name:'凉山'},{id:101271701,name:'雅安'},{id:101271801,name:'甘孜'},{id:101271901,name:'阿坝'},{id:101272001,name:'德阳'},{id:101272101,name:'广元'},{id:101270201,name:'攀枝花'},{id:101170101,name:'银川'},{id:101170501,name:'中卫'},{id:101170401,name:'固原'},{id:101170201,name:'石嘴山'},{id:101170301,name:'吴忠'},{id:101150101,name:'西宁'},{id:101150301,name:'黄南'},{id:101150801,name:'海北'},{id:101150501,name:'果洛'},{id:101150601,name:'玉树'},{id:101150701,name:'海西'},{id:101150201,name:'海东'},{id:101150401,name:'海南'},{id:101120101,name:'济南'},{id:101120601,name:'潍坊'},{id:101120901,name:'临沂'},{id:101121001,name:'菏泽'},{id:101121101,name:'滨州'},{id:101121201,name:'东营'},{id:101121301,name:'威海'},{id:101121401,name:'枣庄'},{id:101121501,name:'日照'},{id:101121601,name:'莱芜'},{id:101121701,name:'聊城'},{id:101120201,name:'青岛'},{id:101120301,name:'淄博'},{id:101120401,name:'德州'},{id:101120501,name:'烟台'},{id:101120701,name:'济宁'},{id:101120801,name:'泰安'},{id:101110101,name:'西安'},{id:101110300,name:'延安'},{id:101110401,name:'榆林'},{id:101111001,name:'铜川'},{id:101110601,name:'商洛'},{id:101110701,name:'安康'},{id:101110801,name:'汉中'},{id:101110901,name:'宝鸡'},{id:101110200,name:'咸阳'},{id:101110501,name:'渭南'},{id:101100101,name:'太原'},{id:101100701,name:'临汾'},{id:101100801,name:'运城'},{id:101100901,name:'朔州'},{id:101101001,name:'忻州'},{id:101100501,name:'长治'},{id:101100201,name:'大同'},{id:101100301,name:'阳泉'},{id:101100401,name:'晋中'},{id:101100601,name:'晋城'},{id:101101100,name:'吕梁'},{id:101130101,name:'乌鲁木齐'},{id:101130301,name:'石河子'},{id:101130401,name:'昌吉'},{id:101130501,name:'吐鲁番'},{id:101130601,name:'库尔勒'},{id:101130701,name:'阿拉尔'},{id:101130801,name:'阿克苏'},{id:101130901,name:'喀什'},{id:101131001,name:'伊宁'},{id:101131101,name:'塔城'},{id:101131201,name:'哈密'},{id:101131301,name:'和田'},{id:101131401,name:'阿勒泰'},{id:101131501,name:'阿图什'},{id:101131601,name:'博乐'},{id:101130201,name:'克拉玛依'},{id:101140101,name:'拉萨'},{id:101140301,name:'山南'},{id:101140701,name:'阿里'},{id:101140501,name:'昌都'},{id:101140601,name:'那曲'},{id:101140201,name:'日喀则'},{id:101140401,name:'林芝'},{id:101340101,name:'台北县'},{id:101340201,name:'高雄'},{id:101340401,name:'台中'},{id:101310101,name:'海口'},{id:101310201,name:'三亚'},{id:101310202,name:'东方'},{id:101310203,name:'临高'},{id:101310204,name:'澄迈'},{id:101310205,name:'儋州'},{id:101310206,name:'昌江'},{id:101310207,name:'白沙'},{id:101310208,name:'琼中'},{id:101310209,name:'定安'},{id:101310210,name:'屯昌'},{id:101310211,name:'琼海'},{id:101310212,name:'文昌'},{id:101310214,name:'保亭'},{id:101310215,name:'万宁'},{id:101310216,name:'陵水'},{id:101310217,name:'西沙'},{id:101310220,name:'南沙岛'},{id:101310221,name:'乐东'},{id:101310222,name:'五指山'},{id:101310102,name:'琼山'},{id:101250101,name:'长沙'},{id:101250301,name:'株洲'},{id:101250401,name:'衡阳'},{id:101250501,name:'郴州'},{id:101250601,name:'常德'},{id:101250700,name:'益阳'},{id:101250801,name:'娄底'},{id:101250901,name:'邵阳'},{id:101251001,name:'岳阳'},{id:101251101,name:'张家界'},{id:101251201,name:'怀化'},{id:101251301,name:'黔阳'},{id:101251401,name:'永州'},{id:101251501,name:'吉首'},{id:101250201,name:'湘潭'},{id:101190101,name:'南京'},{id:101190301,name:'镇江'},{id:101190401,name:'苏州'},{id:101190501,name:'南通'},{id:101190601,name:'扬州'},{id:101191301,name:'宿迁'},{id:101190801,name:'徐州'},{id:101190901,name:'淮安'},{id:101191001,name:'连云港'},{id:101191101,name:'常州'},{id:101191201,name:'泰州'},{id:101190201,name:'无锡'},{id:101190701,name:'盐城'},{id:101050101,name:'哈尔滨'},{id:101050301,name:'牡丹江'},{id:101050401,name:'佳木斯'},{id:101050501,name:'绥化'},{id:101050601,name:'黑河'},{id:101051301,name:'双鸭山'},{id:101050801,name:'伊春'},{id:101050901,name:'大庆'},{id:101051002,name:'七台河'},{id:101051101,name:'鸡西'},{id:101051201,name:'鹤岗'},{id:101050201,name:'齐齐哈尔'},{id:101050701,name:'大兴安岭'},{id:101060101,name:'长春'},{id:101060301,name:'延吉'},{id:101060401,name:'四平'},{id:101060901,name:'白山'},{id:101060601,name:'白城'},{id:101060701,name:'辽源'},{id:101060801,name:'松原'},{id:101060201,name:'吉林'},{id:101060501,name:'通化'},{id:101070101,name:'沈阳'},{id:101070301,name:'鞍山'},{id:101070401,name:'抚顺'},{id:101070501,name:'本溪'},{id:101070601,name:'丹东'},{id:101071401,name:'葫芦岛'},{id:101070801,name:'营口'},{id:101070901,name:'阜新'},{id:101071001,name:'辽阳'},{id:101071101,name:'铁岭'},{id:101071201,name:'朝阳'},{id:101071301,name:'盘锦'},{id:101070201,name:'大连'},{id:101070701,name:'锦州'}];

var select1='<select id="gs-weather-com-cn-prov"><option>先选择省</option>';
$.each(weaChina,function(j,k){
	select1+='<option value="'+k.id+'">'+k.name+'</option>'
})
select1+='</select>';

$('#gs-weather-com-cn-div').append(select1);

$('#gs-weather-com-cn-div').on('change','#gs-weather-com-cn-prov',function(){
	
	var v=$(this).val();
	var select2='<select id="gs-weather-com-cn-city"><option>选择城市</option>';
	$.each(weaCity,function(j,k){
		var a=k.id.toString().substring(0,5);
		if(a==v){
			select2+='<option value="'+k.id+'">'+k.name+'</option>';
		}
	})
	select2+='</select>';

	$('#gs-weather-com-cn-city').remove();
	$(this).after(select2);

})

$('#gs-weather-com-cn-div').on('change','#gs-weather-com-cn-city',function(){
	var cid=$(this).val();
	$.ajax({
		url:'http://labs.guoshuang.com/weather/weather.com.cn.php?cid='+cid,
		dataType:'jsonp',
		cache:true,
		success:function(d){
			 var w=d.weatherinfo;
			//处理天气
			var html='';
			html+='<h3 style="text-align:center;">城市：'+w.city+'（'+w.cityid+'）</h3>';
			html+='<div style="color:#999;">发布日期：'+w.date_y+' '+w.week+'</div>';
			
			var tempArr=[w.temp1,w.temp2,w.temp3,w.temp4,w.temp5,w.temp6];
			var weatherArr=[w.weather1,w.weather2,w.weather3,w.weather4,w.weather5,w.weather6];
			var imgArr=[w.img1,w.img2,w.img3,w.img4,w.img5,w.img6];
			var windArr=[w.wind1,w.wind2,w.wind3,w.wind4,w.wind5,w.wind6];

			html+='<ul>';
			for(i=0;i<6;i++){
				var dayStr=i;
				if(dayStr==0){dayStr='今天'}
				else if (dayStr==1){dayStr='明天'}
				else if (dayStr==2){dayStr='后天'}
				else if (dayStr==3){dayStr='大后天'}
				else {dayStr='第'+i+'天'}
				html+='<li><div style="text-align:center"><img src="http://m.weather.com.cn/img/b'+imgArr[i]+'.gif" /></div><p>'+dayStr+'</p><p>温度:'+tempArr[i]+'</p><p>'+weatherArr[i]+'</p><p>'+windArr[i]+'</p></li>';
			}
			html+='</ul>';

			$('#gs-weather-com-cn-div').find('.wea-info').remove();
			$('#gs-weather-com-cn-div').append(html);
		}
	})
})




