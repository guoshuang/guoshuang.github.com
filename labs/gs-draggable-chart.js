function data2chart(){var u=.8,E=$("#gs-draggable-chart-container");try{var F=JSON.parse($("#gs-draggable-chart-data").text())}catch(C){alert("数据有错误！")}if(F){var D="",t=E.width()/F.length,B=$("#gs-draggable-chart-container").height(),e=Array.max(F);for(i=0;i<F.length;i++){var n=F[i]/e*B;D+='<div class="d'+i+'" style="position:absolute;background:'+gs.getColor("greenPower",i%4)+";width:"+t*u+"px;left:"+t*i+"px;text-align:center;margin-left:"+t*(1-u)/2+"px;bottom:0;height:"+n+'px">'+F[i]+'</div><div class="gsHandler" data-index="'+i+'" style="width:'+t*u+"px;left:"+t*i+"px;text-align:center;margin-left:"+t*(1-u)/2+"px;top:"+(B-n)+'px"></div>'}E.html(D),E.find("div.gsHandler").draggable({axis:"y",stop:function(u,C){var D=E.find(".d"+$(this).attr("data-index")),t=C.originalPosition.top-C.position.top+D.height();D.css({height:t+"px"});var i=Math.round(100*(e*t/B))/100;F[$(this).attr("data-index")]=0>i?0:i,$("#gs-draggable-chart-data").text("["+F.join(",")+"]"),data2chart()}})}}Array.max=function(u){return Math.max.apply(Math,u)},jQuery(function(u){u("#gs-draggable-chart-btn").on("click",function(){data2chart()}).trigger("click"),u(window).resize(data2chart)});