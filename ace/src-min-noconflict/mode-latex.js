ace.define("ace/mode/latex",["require","exports","module","ace/lib/oop","ace/mode/text","ace/tokenizer","ace/mode/latex_highlight_rules","ace/mode/folding/latex","ace/range"],function(e,t){var n=e("../lib/oop"),r=e("./text").Mode,o=(e("../tokenizer").Tokenizer,e("./latex_highlight_rules").LatexHighlightRules),i=e("./folding/latex").FoldMode,a=(e("../range").Range,function(){this.HighlightRules=o,this.foldingRules=new i});n.inherits(a,r),function(){this.lineCommentStart="%"}.call(a.prototype),t.Mode=a}),ace.define("ace/mode/latex_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(e,t){var n=e("../lib/oop"),r=e("./text_highlight_rules").TextHighlightRules,o=function(){this.$rules={start:[{token:"keyword",regex:"\\\\(?:[^a-zA-Z]|[a-zA-Z]+)"},{token:"lparen",regex:"[[({]"},{token:"rparen",regex:"[\\])}]"},{token:"string",regex:"\\$(?:(?:\\\\.)|(?:[^\\$\\\\]))*?\\$"},{token:"comment",regex:"%.*$"}]}};n.inherits(o,r),t.LatexHighlightRules=o}),ace.define("ace/mode/folding/latex",["require","exports","module","ace/lib/oop","ace/mode/folding/fold_mode","ace/range","ace/token_iterator"],function(e,t){var n=e("../../lib/oop"),r=e("./fold_mode").FoldMode,o=e("../../range").Range,i=e("../../token_iterator").TokenIterator,a=t.FoldMode=function(){};n.inherits(a,r),function(){this.foldingStartMarker=/^\s*\\(begin)|(section|subsection)\b|{\s*$/,this.foldingStopMarker=/^\s*\\(end)\b|^\s*}/,this.getFoldWidgetRange=function(e,t,n){var r=e.doc.getLine(n),o=this.foldingStartMarker.exec(r);if(o)return o[1]?this.latexBlock(e,n,o[0].length-1):o[2]?this.latexSection(e,n,o[0].length-1):this.openingBracketBlock(e,"{",n,o.index);var o=this.foldingStopMarker.exec(r);return o?o[1]?this.latexBlock(e,n,o[0].length-1):this.closingBracketBlock(e,"}",n,o.index+o[0].length):void 0},this.latexBlock=function(e,t,n){var r={"\\begin":1,"\\end":-1},a=new i(e,t,n),s=a.getCurrentToken();if(s&&"keyword"===s.type){var l=s.value,u=r[l],c=function(){var e=a.stepForward(),t="lparen"==e.type?a.stepForward().value:"";return-1===u&&(a.stepBackward(),t&&a.stepBackward()),t},d=[c()],g=-1===u?a.getCurrentTokenColumn():e.getLine(t).length,h=t;for(a.step=-1===u?a.stepBackward:a.stepForward;s=a.step();)if("keyword"===s.type){var m=r[s.value];if(m){var p=c();if(m===u)d.unshift(p);else if(d.shift()!==p||!d.length)break}}if(!d.length){var t=a.getCurrentTokenRow();return-1===u?new o(t,e.getLine(t).length,h,g):(a.stepBackward(),new o(h,g,t,a.getCurrentTokenColumn()))}}},this.latexSection=function(e,t,n){var r=["\\subsection","\\section","\\begin","\\end"],a=new i(e,t,n),s=a.getCurrentToken();if(s&&"keyword"==s.type){for(var l=r.indexOf(s.value),u=0,c=t;s=a.stepForward();)if("keyword"===s.type){var d=r.indexOf(s.value);if(d>=2){if(u||(c=a.getCurrentTokenRow()-1),u+=2==d?1:-1,0>u)break}else if(d>=l)break}for(u||(c=a.getCurrentTokenRow()-1);c>t&&!/\S/.test(e.getLine(c));)c--;return new o(t,e.getLine(t).length,c,e.getLine(c).length)}}}.call(a.prototype)});