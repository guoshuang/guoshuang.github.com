ace.define("ace/ext/emmet",["require","exports","module","ace/keyboard/hash_handler","ace/editor","ace/snippets","ace/range","ace/config"],function(e,t){function i(){}var n,r=e("ace/keyboard/hash_handler").HashHandler,o=e("ace/editor").Editor,s=e("ace/snippets").snippetManager,u=e("ace/range").Range;o.prototype.indexToPosition=function(e){return this.session.doc.indexToPosition(e)},o.prototype.positionToIndex=function(e){return this.session.doc.positionToIndex(e)},i.prototype={setupContext:function(e){this.ace=e,this.indentation=e.session.getTabString(),n||(n=window.emmet),n.require("resources").setVariable("indentation",this.indentation),this.$syntax=null,this.$syntax=this.getSyntax()},getSelectionRange:function(){var e=this.ace.getSelectionRange();return{start:this.ace.positionToIndex(e.start),end:this.ace.positionToIndex(e.end)}},createSelection:function(e,t){this.ace.selection.setRange({start:this.ace.indexToPosition(e),end:this.ace.indexToPosition(t)})},getCurrentLineRange:function(){var e=this.ace.getCursorPosition().row,t=this.ace.session.getLine(e).length,i=this.ace.positionToIndex({row:e,column:0});return{start:i,end:i+t}},getCaretPos:function(){var e=this.ace.getCursorPosition();return this.ace.positionToIndex(e)},setCaretPos:function(e){var t=this.ace.indexToPosition(e);this.ace.clearSelection(),this.ace.selection.moveCursorToPosition(t)},getCurrentLine:function(){var e=this.ace.getCursorPosition().row;return this.ace.session.getLine(e)},replaceContent:function(e,t,i){null==i&&(i=null==t?this.getContent().length:t),null==t&&(t=0);var n=this.ace,r=u.fromPoints(n.indexToPosition(t),n.indexToPosition(i));n.session.remove(r),r.end=r.start,e=this.$updateTabstops(e),s.insertSnippet(n,e)},getContent:function(){return this.ace.getValue()},getSyntax:function(){if(this.$syntax)return this.$syntax;var e=this.ace.session.$modeId.split("/").pop();if("html"==e||"php"==e){var t=this.ace.getCursorPosition(),i=this.ace.session.getState(t.row);"string"!=typeof i&&(i=i[0]),i&&(i=i.split("-"),i.length>1?e=i[0]:"php"==e&&(e="html"))}return e},getProfileName:function(){switch(this.getSyntax()){case"css":return"css";case"xml":case"xsl":return"xml";case"html":var e=n.require("resources").getVariable("profile");return e||(e=-1!=this.ace.session.getLines(0,2).join("").search(/<!DOCTYPE[^>]+XHTML/i)?"xhtml":"html"),e}return"xhtml"},prompt:function(e){return prompt(e)},getSelection:function(){return this.ace.session.getTextRange()},getFilePath:function(){return""},$updateTabstops:function(e){var t=1e3,i=0,r=null,o=n.require("range"),s=n.require("tabStops"),u=n.require("resources").getVocabulary("user"),a={tabstop:function(e){var n=parseInt(e.group,10),u=0===n;u?n=++i:n+=t;var l=e.placeholder;l&&(l=s.processText(l,a));var c="${"+n+(l?":"+l:"")+"}";return u&&(r=o.create(e.start,c)),c},escape:function(e){return"$"==e?"\\$":"\\"==e?"\\\\":e}};return e=s.processText(e,a),u.variables.insert_final_tabstop&&!/\$\{0\}$/.test(e)?e+="${0}":r&&(e=n.require("utils").replaceSubstring(e,"${0}",r)),e}};var a={expand_abbreviation:{mac:"ctrl+alt+e",win:"alt+e"},match_pair_outward:{mac:"ctrl+d",win:"ctrl+,"},match_pair_inward:{mac:"ctrl+j",win:"ctrl+shift+0"},matching_pair:{mac:"ctrl+alt+j",win:"alt+j"},next_edit_point:"alt+right",prev_edit_point:"alt+left",toggle_comment:{mac:"command+/",win:"ctrl+/"},split_join_tag:{mac:"shift+command+'",win:"shift+ctrl+`"},remove_tag:{mac:"command+'",win:"shift+ctrl+;"},evaluate_math_expression:{mac:"shift+command+y",win:"shift+ctrl+y"},increment_number_by_1:"ctrl+up",decrement_number_by_1:"ctrl+down",increment_number_by_01:"alt+up",decrement_number_by_01:"alt+down",increment_number_by_10:{mac:"alt+command+up",win:"shift+alt+up"},decrement_number_by_10:{mac:"alt+command+down",win:"shift+alt+down"},select_next_item:{mac:"shift+command+.",win:"shift+ctrl+."},select_previous_item:{mac:"shift+command+,",win:"shift+ctrl+,"},reflect_css_value:{mac:"shift+command+r",win:"shift+ctrl+r"},encode_decode_data_url:{mac:"shift+ctrl+d",win:"ctrl+'"},expand_abbreviation_with_tab:"Tab",wrap_with_abbreviation:{mac:"shift+ctrl+a",win:"shift+ctrl+a"}},l=new i;t.commands=new r,t.runEmmetCommand=function(e){if(l.setupContext(e),"php"==l.getSyntax())return!1;var t=n.require("actions");if("expand_abbreviation_with_tab"==this.action&&!e.selection.isEmpty())return!1;if("wrap_with_abbreviation"==this.action)return setTimeout(function(){t.run("wrap_with_abbreviation",l)},0);try{var i=t.run(this.action,l)}catch(r){e._signal("changeStatus","string"==typeof r?r:r.message),console.log(r)}return i};for(var c in a)t.commands.addCommand({name:"emmet:"+c,action:c,bindKey:a[c],exec:t.runEmmetCommand,multiSelectAction:"forEach"});var h=function(e,i){var n=i;if(n){var r=n.session.$modeId,o=r&&/css|less|scss|sass|stylus|html|php/.test(r);e.enableEmmet===!1&&(o=!1),o?n.keyBinding.addKeyboardHandler(t.commands):n.keyBinding.removeKeyboardHandler(t.commands)}};t.AceEmmetEditor=i,e("ace/config").defineOptions(o.prototype,"editor",{enableEmmet:{set:function(e){this[e?"on":"removeListener"]("changeMode",h),h({enableEmmet:!!e},this)},value:!0}}),t.setCore=function(e){n=e}}),ace.define("ace/snippets",["require","exports","module","ace/lib/lang","ace/range","ace/keyboard/hash_handler","ace/tokenizer","ace/lib/dom"],function(e,t){var i=e("./lib/lang"),n=e("./range").Range,r=e("./keyboard/hash_handler").HashHandler,o=e("./tokenizer").Tokenizer,s=n.comparePoints,u=function(){this.snippetMap={},this.snippetNameMap={}};!function(){this.getTokenizer=function(){function e(e,t,i){return e=e.substr(1),/^\d+$/.test(e)&&!i.inFormatString?[{tabstopId:parseInt(e,10)}]:[{text:e}]}function t(e){return"(?:[^\\\\"+e+"]|\\\\.)"}return u.$tokenizer=new o({start:[{regex:/:/,onMatch:function(e,t,i){return i.length&&i[0].expectIf?(i[0].expectIf=!1,i[0].elseBranch=i[0],[i[0]]):":"}},{regex:/\\./,onMatch:function(e,t,i){var n=e[1];return"}"==n&&i.length?e=n:-1!="`$\\".indexOf(n)?e=n:i.inFormatString&&("n"==n?e="\n":"t"==n?e="\n":-1!="ulULE".indexOf(n)&&(e={changeCase:n,local:n>"a"})),[e]}},{regex:/}/,onMatch:function(e,t,i){return[i.length?i.shift():e]}},{regex:/\$(?:\d+|\w+)/,onMatch:e},{regex:/\$\{[\dA-Z_a-z]+/,onMatch:function(t,i,n){var r=e(t.substr(1),i,n);return n.unshift(r[0]),r},next:"snippetVar"},{regex:/\n/,token:"newline",merge:!1}],snippetVar:[{regex:"\\|"+t("\\|")+"*\\|",onMatch:function(e,t,i){i[0].choices=e.slice(1,-1).split(",")},next:"start"},{regex:"/("+t("/")+"+)/(?:("+t("/")+"*)/)(\\w*):?",onMatch:function(e,t,i){var n=i[0];return n.fmtString=e,e=this.splitRegex.exec(e),n.guard=e[1],n.fmt=e[2],n.flag=e[3],""},next:"start"},{regex:"`"+t("`")+"*`",onMatch:function(e,t,i){return i[0].code=e.splice(1,-1),""},next:"start"},{regex:"\\?",onMatch:function(e,t,i){i[0]&&(i[0].expectIf=!0)},next:"start"},{regex:"([^:}\\\\]|\\\\.)*:?",token:"",next:"start"}],formatString:[{regex:"/("+t("/")+"+)/",token:"regex"},{regex:"",onMatch:function(e,t,i){i.inFormatString=!0},next:"start"}]}),u.prototype.getTokenizer=function(){return u.$tokenizer},u.$tokenizer},this.tokenizeTmSnippet=function(e,t){return this.getTokenizer().getLineTokens(e,t).tokens.map(function(e){return e.value||e})},this.$getDefaultValue=function(e,t){if(/^[A-Z]\d+$/.test(t)){var i=t.substr(1);return(this.variables[t[0]+"__"]||{})[i]}if(/^\d+$/.test(t))return(this.variables.__||{})[t];if(t=t.replace(/^TM_/,""),e){var n=e.session;switch(t){case"CURRENT_WORD":var r=n.getWordRange();case"SELECTION":case"SELECTED_TEXT":return n.getTextRange(r);case"CURRENT_LINE":return n.getLine(e.getCursorPosition().row);case"PREV_LINE":return n.getLine(e.getCursorPosition().row-1);case"LINE_INDEX":return e.getCursorPosition().column;case"LINE_NUMBER":return e.getCursorPosition().row+1;case"SOFT_TABS":return n.getUseSoftTabs()?"YES":"NO";case"TAB_SIZE":return n.getTabSize();case"FILENAME":case"FILEPATH":return"ace.ajax.org";case"FULLNAME":return"Ace"}}},this.variables={},this.getVariableValue=function(e,t){return this.variables.hasOwnProperty(t)?this.variables[t](e,t)||"":this.$getDefaultValue(e,t)||""},this.tmStrFormat=function(e,t,i){var n=t.flag||"",r=t.guard;r=new RegExp(r,n.replace(/[^gi]/,""));var o=this.tokenizeTmSnippet(t.fmt,"formatString"),s=this,u=e.replace(r,function(){s.variables.__=arguments;for(var e=s.resolveVariables(o,i),t="E",n=0;n<e.length;n++){var r=e[n];if("object"==typeof r)if(e[n]="",r.changeCase&&r.local){var u=e[n+1];u&&"string"==typeof u&&(e[n]="u"==r.changeCase?u[0].toUpperCase():u[0].toLowerCase(),e[n+1]=u.substr(1))}else r.changeCase&&(t=r.changeCase);else"U"==t?e[n]=r.toUpperCase():"L"==t&&(e[n]=r.toLowerCase())}return e.join("")});return this.variables.__=null,u},this.resolveVariables=function(e,t){function i(t){var i=e.indexOf(t,r+1);-1!=i&&(r=i)}for(var n=[],r=0;r<e.length;r++){var o=e[r];if("string"==typeof o)n.push(o);else{if("object"!=typeof o)continue;if(o.skip)i(o);else{if(o.processed<r)continue;if(o.text){var s=this.getVariableValue(t,o.text);s&&o.fmtString&&(s=this.tmStrFormat(s,o)),o.processed=r,null==o.expectIf?s&&(n.push(s),i(o)):s?o.skip=o.elseBranch:i(o)}else null!=o.tabstopId?n.push(o):null!=o.changeCase&&n.push(o)}}}return n},this.insertSnippet=function(e,t){function i(e){for(var t=[],i=0;i<e.length;i++){var n=e[i];if("object"==typeof n){if(c[n.tabstopId])continue;var r=e.lastIndexOf(n,i-1);n=t[r]||{tabstopId:n.tabstopId}}t[i]=n}return t}var n=e.getCursorPosition(),r=e.session.getLine(n.row),o=r.match(/^\s*/)[0],s=e.session.getTabString(),u=this.tokenizeTmSnippet(t);u=this.resolveVariables(u,e),u=u.map(function(e){return"\n"==e?e+o:"string"==typeof e?e.replace(/\t/g,s):e});var l=[];u.forEach(function(e,t){if("object"==typeof e){var i=e.tabstopId,n=l[i];if(n||(n=l[i]=[],n.index=i,n.value=""),-1===n.indexOf(e)){n.push(e);var r=u.indexOf(e,t+1);if(-1!==r){var o=u.slice(t+1,r),s=o.some(function(e){return"object"==typeof e});s&&!n.value?n.value=o:o.length&&(!n.value||"string"!=typeof n.value)&&(n.value=o.join(""))}}}}),l.forEach(function(e){e.length=0});for(var c={},h=0;h<u.length;h++){var d=u[h];if("object"==typeof d){var g=d.tabstopId,E=u.indexOf(d,h+1);if(c[g]!=d){var m=l[g],f="string"==typeof m.value?[m.value]:i(m.value);f.unshift(h+1,Math.max(0,E-h)),f.push(d),c[g]=d,u.splice.apply(u,f),-1===m.indexOf(d)&&m.push(d)}else c[g]=null}}var F=0,p=0,C="";u.forEach(function(e){"string"==typeof e?("\n"===e[0]?(p=e.length-1,F++):p+=e.length,C+=e):e.start?e.end={row:F,column:p}:e.start={row:F,column:p}});var A=e.getSelectionRange(),v=e.session.replace(A,C),B=new a(e);B.addTabstops(l,A.start,v),B.tabNext()},this.$getScope=function(e){var t=e.session.$mode.$id||"";if(t=t.split("/").pop(),"html"===t||"php"===t){"php"===t&&(t="html");var i=e.getCursorPosition(),n=e.session.getState(i.row);"object"==typeof n&&(n=n[0]),n.substring&&("js-"==n.substring(0,3)?t="javascript":"css-"==n.substring(0,4)?t="css":"php-"==n.substring(0,4)&&(t="php"))}return t},this.expandWithTab=function(e){var t,i=e.getCursorPosition(),n=e.session.getLine(i.row),r=n.substring(0,i.column),o=n.substr(i.column),s=this.$getScope(e),u=this.snippetMap;return[s,"_"].some(function(e){var i=u[e];return i&&(t=this.findMatchingSnippet(i,r,o)),!!t},this),t?(e.session.doc.removeInLine(i.row,i.column-t.replaceBefore.length,i.column+t.replaceAfter.length),this.variables.M__=t.matchBefore,this.variables.T__=t.matchAfter,this.insertSnippet(e,t.content),this.variables.M__=this.variables.T__=null,!0):!1},this.findMatchingSnippet=function(e,t,i){for(var n=e.length;n--;){var r=e[n];if(!(r.startRe&&!r.startRe.test(t)||r.endRe&&!r.endRe.test(i)||!r.startRe&&!r.endRe))return r.matchBefore=r.startRe?r.startRe.exec(t):[""],r.matchAfter=r.endRe?r.endRe.exec(i):[""],r.replaceBefore=r.triggerRe?r.triggerRe.exec(t)[0]:"",r.replaceAfter=r.endTriggerRe?r.endTriggerRe.exec(i)[0]:"",r}},this.snippetMap={},this.snippetNameMap={},this.register=function(e,t){function n(e){return e&&!/^\^?\(.*\)\$?$|^\\b$/.test(e)&&(e="(?:"+e+")"),e||""}function r(e,t,i){return e=n(e),t=n(t),i?(e=t+e,e&&"$"!=e[e.length-1]&&(e+="$")):(e+=t,e&&"^"!=e[0]&&(e="^"+e)),new RegExp(e)}function o(e){e.scope||(e.scope=t||"_"),t=e.scope,s[t]||(s[t]=[],u[t]={});var n=u[t];if(e.name){var o=n[e.name];o&&a.unregister(o),n[e.name]=e}s[t].push(e),e.tabTrigger&&!e.trigger&&(!e.guard&&/^\w/.test(e.tabTrigger)&&(e.guard="\\b"),e.trigger=i.escapeRegExp(e.tabTrigger)),e.startRe=r(e.trigger,e.guard,!0),e.triggerRe=new RegExp(e.trigger,"",!0),e.endRe=r(e.endTrigger,e.endGuard,!0),e.endTriggerRe=new RegExp(e.endTrigger,"",!0)}var s=this.snippetMap,u=this.snippetNameMap,a=this;e.content?o(e):Array.isArray(e)&&e.forEach(o)},this.unregister=function(e,t){function i(e){var i=r[e.scope||t];if(i&&i[e.name]){delete i[e.name];var o=n[e.scope||t],s=o&&o.indexOf(e);s>=0&&o.splice(s,1)}}var n=this.snippetMap,r=this.snippetNameMap;e.content?i(e):Array.isArray(e)&&e.forEach(i)},this.parseSnippetFile=function(e){e=e.replace(/\r/g,"");for(var t,i=[],n={},r=/^#.*|^({[\s\S]*})\s*$|^(\S+) (.*)$|^((?:\n*\t.*)+)/gm;t=r.exec(e);){if(t[1])try{n=JSON.parse(t[1]),i.push(n)}catch(o){}if(t[4])n.content=t[4].replace(/^\t/gm,""),i.push(n),n={};else{var s=t[2],u=t[3];if("regex"==s){var a=/\/((?:[^\/\\]|\\.)*)|$/g;n.guard=a.exec(u)[1],n.trigger=a.exec(u)[1],n.endTrigger=a.exec(u)[1],n.endGuard=a.exec(u)[1]}else"snippet"==s?(n.tabTrigger=u.match(/^\S*/)[0],n.name||(n.name=u)):n[s]=u}}return i},this.getSnippetByName=function(e,t){var i,n=t&&this.$getScope(t),r=this.snippetNameMap;return[n,"_"].some(function(t){var n=r[t];return n&&(i=n[e]),!!i},this),i}}.call(u.prototype);var a=function(e){return e.tabstopManager?e.tabstopManager:(e.tabstopManager=this,this.$onChange=this.onChange.bind(this),this.$onChangeSelection=i.delayedCall(this.onChangeSelection.bind(this)).schedule,this.$onChangeSession=this.onChangeSession.bind(this),this.$onAfterExec=this.onAfterExec.bind(this),this.attach(e),void 0)};!function(){this.attach=function(e){this.index=-1,this.ranges=[],this.tabstops=[],this.selectedTabstop=null,this.editor=e,this.editor.on("change",this.$onChange),this.editor.on("changeSelection",this.$onChangeSelection),this.editor.on("changeSession",this.$onChangeSession),this.editor.commands.on("afterExec",this.$onAfterExec),this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler)},this.detach=function(){this.tabstops.forEach(this.removeTabstopMarkers,this),this.ranges=null,this.tabstops=null,this.selectedTabstop=null,this.editor.removeListener("change",this.$onChange),this.editor.removeListener("changeSelection",this.$onChangeSelection),this.editor.removeListener("changeSession",this.$onChangeSession),this.editor.commands.removeListener("afterExec",this.$onAfterExec),this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler),this.editor.tabstopManager=null,this.editor=null},this.onChange=function(e){var t=e.data.range,i="r"==e.data.action[0],n=t.start,r=t.end,o=n.row,u=r.row,a=u-o,l=r.column-n.column;if(i&&(a=-a,l=-l),!this.$inChange&&i){var c=this.selectedTabstop,h=!c.some(function(e){return s(e.start,n)<=0&&s(e.end,r)>=0});if(h)return this.detach()}for(var d=this.ranges,g=0;g<d.length;g++){var E=d[g];E.end.row<n.row||(s(n,E.start)<0&&s(r,E.end)>0?(this.removeRange(E),g--):(E.start.row==o&&E.start.column>n.column&&(E.start.column+=l),E.end.row==o&&E.end.column>=n.column&&(E.end.column+=l),E.start.row>=o&&(E.start.row+=a),E.end.row>=o&&(E.end.row+=a),s(E.start,E.end)>0&&this.removeRange(E)))}d.length||this.detach()},this.updateLinkedFields=function(){var e=this.selectedTabstop;if(e.hasLinkedRanges){this.$inChange=!0;for(var i=this.editor.session,n=i.getTextRange(e.firstNonLinked),r=e.length;r--;){var o=e[r];if(o.linked){var s=t.snippetManager.tmStrFormat(n,o.original);i.replace(o,s)}}this.$inChange=!1}},this.onAfterExec=function(e){e.command&&!e.command.readOnly&&this.updateLinkedFields()},this.onChangeSelection=function(){if(this.editor){for(var e=this.editor.selection.lead,t=this.editor.selection.anchor,i=this.editor.selection.isEmpty(),n=this.ranges.length;n--;)if(!this.ranges[n].linked){var r=this.ranges[n].contains(e.row,e.column),o=i||this.ranges[n].contains(t.row,t.column);if(r&&o)return}this.detach()}},this.onChangeSession=function(){this.detach()},this.tabNext=function(e){var t=this.tabstops.length-1,i=this.index+(e||1);i=Math.min(Math.max(i,0),t),this.selectTabstop(i),i==t&&this.detach()},this.selectTabstop=function(e){var t=this.tabstops[this.index];if(t&&this.addTabstopMarkers(t),this.index=e,t=this.tabstops[this.index],t&&t.length){if(this.selectedTabstop=t,this.editor.inVirtualSelectionMode)this.editor.selection.setRange(t.firstNonLinked);else{var i=this.editor.multiSelect;i.toSingleRange(t.firstNonLinked.clone());for(var n=t.length;n--;)t.hasLinkedRanges&&t[n].linked||i.addRange(t[n].clone(),!0)}this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler)}},this.addTabstops=function(e,t,i){if(!e[0]){var r=n.fromPoints(i,i);c(r.start,t),c(r.end,t),e[0]=[r],e[0].index=0}var o=this.index,s=[o,0],u=this.ranges;this.editor,e.forEach(function(e){for(var i=e.length;i--;){var r=e[i],o=n.fromPoints(r.start,r.end||r.start);l(o.start,t),l(o.end,t),o.original=r,o.tabstop=e,u.push(o),e[i]=o,r.fmtString?(o.linked=!0,e.hasLinkedRanges=!0):e.firstNonLinked||(e.firstNonLinked=o)}e.firstNonLinked||(e.hasLinkedRanges=!1),s.push(e),this.addTabstopMarkers(e)},this),s.push(s.splice(2,1)[0]),this.tabstops.splice.apply(this.tabstops,s)},this.addTabstopMarkers=function(e){var t=this.editor.session;e.forEach(function(e){e.markerId||(e.markerId=t.addMarker(e,"ace_snippet-marker","text"))})},this.removeTabstopMarkers=function(e){var t=this.editor.session;e.forEach(function(e){t.removeMarker(e.markerId),e.markerId=null})},this.removeRange=function(e){var t=e.tabstop.indexOf(e);e.tabstop.splice(t,1),t=this.ranges.indexOf(e),this.ranges.splice(t,1),this.editor.session.removeMarker(e.markerId)},this.keyboardHandler=new r,this.keyboardHandler.bindKeys({Tab:function(e){e.tabstopManager.tabNext(1)},"Shift-Tab":function(e){e.tabstopManager.tabNext(-1)},Esc:function(e){e.tabstopManager.detach()},Return:function(){return!1}})}.call(a.prototype);var l=function(e,t){0==e.row&&(e.column+=t.column),e.row+=t.row},c=function(e,t){e.row==t.row&&(e.column-=t.column),e.row-=t.row};e("./lib/dom").importCssString(".ace_snippet-marker {    -moz-box-sizing: border-box;    box-sizing: border-box;    background: rgba(194, 193, 208, 0.09);    border: 1px dotted rgba(211, 208, 235, 0.62);    position: absolute;}"),t.snippetManager=new u});