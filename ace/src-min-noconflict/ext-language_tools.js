ace.define("ace/ext/language_tools",["require","exports","module","ace/snippets","ace/autocomplete","ace/config","ace/autocomplete/text_completer","ace/editor"],function(e,t){var i=e("../snippets").snippetManager,n=e("../autocomplete").Autocomplete,r=e("../config"),o=e("../autocomplete/text_completer"),s={getCompletions:function(e,t,i,n,r){var o=e.session.getState(i.row),s=t.$mode.getCompletions(o,t,i,n);r(null,s)}},u={getCompletions:function(e,t,n,r,o){var s=i.$getScope(e),u=i.snippetMap,a=[];[s,"_"].forEach(function(e){for(var t=u[e]||[],i=t.length;i--;){var n=t[i],r=n.name||n.tabTrigger;r&&a.push({caption:r,snippet:n.content,meta:n.tabTrigger&&!n.name?n.tabTrigger+"â‡¥ ":"snippet"})}},this),o(null,a)}},a=[u,o,s];t.addCompleter=function(e){a.push(e)};var l={name:"expandSnippet",exec:function(e){var t=i.expandWithTab(e);t||e.execCommand("indent")},bindKey:"tab"},c=function(e,t){var n=t.session.$mode,o=n.$id;if(i.files||(i.files={}),o&&!i.files[o]){var s=o.replace("mode","snippets");r.loadModule(s,function(e){e&&(i.files[o]=e,e.snippets=i.parseSnippetFile(e.snippetText),i.register(e.snippets,e.scope))})}},h=e("../editor").Editor;e("../config").defineOptions(h.prototype,"editor",{enableBasicAutocompletion:{set:function(e){e?(this.completers=a,this.commands.addCommand(n.startCommand)):this.commands.removeCommand(n.startCommand)},value:!1},enableSnippets:{set:function(e){e?(this.commands.addCommand(l),this.on("changeMode",c),c(null,this)):(this.commands.removeCommand(l),this.off("changeMode",c))},value:!1}})}),ace.define("ace/snippets",["require","exports","module","ace/lib/lang","ace/range","ace/keyboard/hash_handler","ace/tokenizer","ace/lib/dom"],function(e,t){var i=e("./lib/lang"),n=e("./range").Range,r=e("./keyboard/hash_handler").HashHandler,o=e("./tokenizer").Tokenizer,s=n.comparePoints,u=function(){this.snippetMap={},this.snippetNameMap={}};!function(){this.getTokenizer=function(){function e(e,t,i){return e=e.substr(1),/^\d+$/.test(e)&&!i.inFormatString?[{tabstopId:parseInt(e,10)}]:[{text:e}]}function t(e){return"(?:[^\\\\"+e+"]|\\\\.)"}return u.$tokenizer=new o({start:[{regex:/:/,onMatch:function(e,t,i){return i.length&&i[0].expectIf?(i[0].expectIf=!1,i[0].elseBranch=i[0],[i[0]]):":"}},{regex:/\\./,onMatch:function(e,t,i){var n=e[1];return"}"==n&&i.length?e=n:-1!="`$\\".indexOf(n)?e=n:i.inFormatString&&("n"==n?e="\n":"t"==n?e="\n":-1!="ulULE".indexOf(n)&&(e={changeCase:n,local:n>"a"})),[e]}},{regex:/}/,onMatch:function(e,t,i){return[i.length?i.shift():e]}},{regex:/\$(?:\d+|\w+)/,onMatch:e},{regex:/\$\{[\dA-Z_a-z]+/,onMatch:function(t,i,n){var r=e(t.substr(1),i,n);return n.unshift(r[0]),r},next:"snippetVar"},{regex:/\n/,token:"newline",merge:!1}],snippetVar:[{regex:"\\|"+t("\\|")+"*\\|",onMatch:function(e,t,i){i[0].choices=e.slice(1,-1).split(",")},next:"start"},{regex:"/("+t("/")+"+)/(?:("+t("/")+"*)/)(\\w*):?",onMatch:function(e,t,i){var n=i[0];return n.fmtString=e,e=this.splitRegex.exec(e),n.guard=e[1],n.fmt=e[2],n.flag=e[3],""},next:"start"},{regex:"`"+t("`")+"*`",onMatch:function(e,t,i){return i[0].code=e.splice(1,-1),""},next:"start"},{regex:"\\?",onMatch:function(e,t,i){i[0]&&(i[0].expectIf=!0)},next:"start"},{regex:"([^:}\\\\]|\\\\.)*:?",token:"",next:"start"}],formatString:[{regex:"/("+t("/")+"+)/",token:"regex"},{regex:"",onMatch:function(e,t,i){i.inFormatString=!0},next:"start"}]}),u.prototype.getTokenizer=function(){return u.$tokenizer},u.$tokenizer},this.tokenizeTmSnippet=function(e,t){return this.getTokenizer().getLineTokens(e,t).tokens.map(function(e){return e.value||e})},this.$getDefaultValue=function(e,t){if(/^[A-Z]\d+$/.test(t)){var i=t.substr(1);return(this.variables[t[0]+"__"]||{})[i]}if(/^\d+$/.test(t))return(this.variables.__||{})[t];if(t=t.replace(/^TM_/,""),e){var n=e.session;switch(t){case"CURRENT_WORD":var r=n.getWordRange();case"SELECTION":case"SELECTED_TEXT":return n.getTextRange(r);case"CURRENT_LINE":return n.getLine(e.getCursorPosition().row);case"PREV_LINE":return n.getLine(e.getCursorPosition().row-1);case"LINE_INDEX":return e.getCursorPosition().column;case"LINE_NUMBER":return e.getCursorPosition().row+1;case"SOFT_TABS":return n.getUseSoftTabs()?"YES":"NO";case"TAB_SIZE":return n.getTabSize();case"FILENAME":case"FILEPATH":return"ace.ajax.org";case"FULLNAME":return"Ace"}}},this.variables={},this.getVariableValue=function(e,t){return this.variables.hasOwnProperty(t)?this.variables[t](e,t)||"":this.$getDefaultValue(e,t)||""},this.tmStrFormat=function(e,t,i){var n=t.flag||"",r=t.guard;r=new RegExp(r,n.replace(/[^gi]/,""));var o=this.tokenizeTmSnippet(t.fmt,"formatString"),s=this,u=e.replace(r,function(){s.variables.__=arguments;for(var e=s.resolveVariables(o,i),t="E",n=0;n<e.length;n++){var r=e[n];if("object"==typeof r)if(e[n]="",r.changeCase&&r.local){var u=e[n+1];u&&"string"==typeof u&&(e[n]="u"==r.changeCase?u[0].toUpperCase():u[0].toLowerCase(),e[n+1]=u.substr(1))}else r.changeCase&&(t=r.changeCase);else"U"==t?e[n]=r.toUpperCase():"L"==t&&(e[n]=r.toLowerCase())}return e.join("")});return this.variables.__=null,u},this.resolveVariables=function(e,t){function i(t){var i=e.indexOf(t,r+1);-1!=i&&(r=i)}for(var n=[],r=0;r<e.length;r++){var o=e[r];if("string"==typeof o)n.push(o);else{if("object"!=typeof o)continue;if(o.skip)i(o);else{if(o.processed<r)continue;if(o.text){var s=this.getVariableValue(t,o.text);s&&o.fmtString&&(s=this.tmStrFormat(s,o)),o.processed=r,null==o.expectIf?s&&(n.push(s),i(o)):s?o.skip=o.elseBranch:i(o)}else null!=o.tabstopId?n.push(o):null!=o.changeCase&&n.push(o)}}}return n},this.insertSnippet=function(e,t){function i(e){for(var t=[],i=0;i<e.length;i++){var n=e[i];if("object"==typeof n){if(c[n.tabstopId])continue;var r=e.lastIndexOf(n,i-1);n=t[r]||{tabstopId:n.tabstopId}}t[i]=n}return t}var n=e.getCursorPosition(),r=e.session.getLine(n.row),o=r.match(/^\s*/)[0],s=e.session.getTabString(),u=this.tokenizeTmSnippet(t);u=this.resolveVariables(u,e),u=u.map(function(e){return"\n"==e?e+o:"string"==typeof e?e.replace(/\t/g,s):e});var l=[];u.forEach(function(e,t){if("object"==typeof e){var i=e.tabstopId,n=l[i];if(n||(n=l[i]=[],n.index=i,n.value=""),-1===n.indexOf(e)){n.push(e);var r=u.indexOf(e,t+1);if(-1!==r){var o=u.slice(t+1,r),s=o.some(function(e){return"object"==typeof e});s&&!n.value?n.value=o:o.length&&(!n.value||"string"!=typeof n.value)&&(n.value=o.join(""))}}}}),l.forEach(function(e){e.length=0});for(var c={},h=0;h<u.length;h++){var d=u[h];if("object"==typeof d){var g=d.tabstopId,m=u.indexOf(d,h+1);if(c[g]!=d){var f=l[g],E="string"==typeof f.value?[f.value]:i(f.value);E.unshift(h+1,Math.max(0,m-h)),E.push(d),c[g]=d,u.splice.apply(u,E),-1===f.indexOf(d)&&f.push(d)}else c[g]=null}}var p=0,F=0,C="";u.forEach(function(e){"string"==typeof e?("\n"===e[0]?(F=e.length-1,p++):F+=e.length,C+=e):e.start?e.end={row:p,column:F}:e.start={row:p,column:F}});var A=e.getSelectionRange(),v=e.session.replace(A,C),B=new a(e);B.addTabstops(l,A.start,v),B.tabNext()},this.$getScope=function(e){var t=e.session.$mode.$id||"";if(t=t.split("/").pop(),"html"===t||"php"===t){"php"===t&&(t="html");var i=e.getCursorPosition(),n=e.session.getState(i.row);"object"==typeof n&&(n=n[0]),n.substring&&("js-"==n.substring(0,3)?t="javascript":"css-"==n.substring(0,4)?t="css":"php-"==n.substring(0,4)&&(t="php"))}return t},this.expandWithTab=function(e){var t,i=e.getCursorPosition(),n=e.session.getLine(i.row),r=n.substring(0,i.column),o=n.substr(i.column),s=this.$getScope(e),u=this.snippetMap;return[s,"_"].some(function(e){var i=u[e];return i&&(t=this.findMatchingSnippet(i,r,o)),!!t},this),t?(e.session.doc.removeInLine(i.row,i.column-t.replaceBefore.length,i.column+t.replaceAfter.length),this.variables.M__=t.matchBefore,this.variables.T__=t.matchAfter,this.insertSnippet(e,t.content),this.variables.M__=this.variables.T__=null,!0):!1},this.findMatchingSnippet=function(e,t,i){for(var n=e.length;n--;){var r=e[n];if(!(r.startRe&&!r.startRe.test(t)||r.endRe&&!r.endRe.test(i)||!r.startRe&&!r.endRe))return r.matchBefore=r.startRe?r.startRe.exec(t):[""],r.matchAfter=r.endRe?r.endRe.exec(i):[""],r.replaceBefore=r.triggerRe?r.triggerRe.exec(t)[0]:"",r.replaceAfter=r.endTriggerRe?r.endTriggerRe.exec(i)[0]:"",r}},this.snippetMap={},this.snippetNameMap={},this.register=function(e,t){function n(e){return e&&!/^\^?\(.*\)\$?$|^\\b$/.test(e)&&(e="(?:"+e+")"),e||""}function r(e,t,i){return e=n(e),t=n(t),i?(e=t+e,e&&"$"!=e[e.length-1]&&(e+="$")):(e+=t,e&&"^"!=e[0]&&(e="^"+e)),new RegExp(e)}function o(e){e.scope||(e.scope=t||"_"),t=e.scope,s[t]||(s[t]=[],u[t]={});var n=u[t];if(e.name){var o=n[e.name];o&&a.unregister(o),n[e.name]=e}s[t].push(e),e.tabTrigger&&!e.trigger&&(!e.guard&&/^\w/.test(e.tabTrigger)&&(e.guard="\\b"),e.trigger=i.escapeRegExp(e.tabTrigger)),e.startRe=r(e.trigger,e.guard,!0),e.triggerRe=new RegExp(e.trigger,"",!0),e.endRe=r(e.endTrigger,e.endGuard,!0),e.endTriggerRe=new RegExp(e.endTrigger,"",!0)}var s=this.snippetMap,u=this.snippetNameMap,a=this;e.content?o(e):Array.isArray(e)&&e.forEach(o)},this.unregister=function(e,t){function i(e){var i=r[e.scope||t];if(i&&i[e.name]){delete i[e.name];var o=n[e.scope||t],s=o&&o.indexOf(e);s>=0&&o.splice(s,1)}}var n=this.snippetMap,r=this.snippetNameMap;e.content?i(e):Array.isArray(e)&&e.forEach(i)},this.parseSnippetFile=function(e){e=e.replace(/\r/g,"");for(var t,i=[],n={},r=/^#.*|^({[\s\S]*})\s*$|^(\S+) (.*)$|^((?:\n*\t.*)+)/gm;t=r.exec(e);){if(t[1])try{n=JSON.parse(t[1]),i.push(n)}catch(o){}if(t[4])n.content=t[4].replace(/^\t/gm,""),i.push(n),n={};else{var s=t[2],u=t[3];if("regex"==s){var a=/\/((?:[^\/\\]|\\.)*)|$/g;n.guard=a.exec(u)[1],n.trigger=a.exec(u)[1],n.endTrigger=a.exec(u)[1],n.endGuard=a.exec(u)[1]}else"snippet"==s?(n.tabTrigger=u.match(/^\S*/)[0],n.name||(n.name=u)):n[s]=u}}return i},this.getSnippetByName=function(e,t){var i,n=t&&this.$getScope(t),r=this.snippetNameMap;return[n,"_"].some(function(t){var n=r[t];return n&&(i=n[e]),!!i},this),i}}.call(u.prototype);var a=function(e){return e.tabstopManager?e.tabstopManager:(e.tabstopManager=this,this.$onChange=this.onChange.bind(this),this.$onChangeSelection=i.delayedCall(this.onChangeSelection.bind(this)).schedule,this.$onChangeSession=this.onChangeSession.bind(this),this.$onAfterExec=this.onAfterExec.bind(this),this.attach(e),void 0)};!function(){this.attach=function(e){this.index=-1,this.ranges=[],this.tabstops=[],this.selectedTabstop=null,this.editor=e,this.editor.on("change",this.$onChange),this.editor.on("changeSelection",this.$onChangeSelection),this.editor.on("changeSession",this.$onChangeSession),this.editor.commands.on("afterExec",this.$onAfterExec),this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler)},this.detach=function(){this.tabstops.forEach(this.removeTabstopMarkers,this),this.ranges=null,this.tabstops=null,this.selectedTabstop=null,this.editor.removeListener("change",this.$onChange),this.editor.removeListener("changeSelection",this.$onChangeSelection),this.editor.removeListener("changeSession",this.$onChangeSession),this.editor.commands.removeListener("afterExec",this.$onAfterExec),this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler),this.editor.tabstopManager=null,this.editor=null},this.onChange=function(e){var t=e.data.range,i="r"==e.data.action[0],n=t.start,r=t.end,o=n.row,u=r.row,a=u-o,l=r.column-n.column;if(i&&(a=-a,l=-l),!this.$inChange&&i){var c=this.selectedTabstop,h=!c.some(function(e){return s(e.start,n)<=0&&s(e.end,r)>=0});if(h)return this.detach()}for(var d=this.ranges,g=0;g<d.length;g++){var m=d[g];m.end.row<n.row||(s(n,m.start)<0&&s(r,m.end)>0?(this.removeRange(m),g--):(m.start.row==o&&m.start.column>n.column&&(m.start.column+=l),m.end.row==o&&m.end.column>=n.column&&(m.end.column+=l),m.start.row>=o&&(m.start.row+=a),m.end.row>=o&&(m.end.row+=a),s(m.start,m.end)>0&&this.removeRange(m)))}d.length||this.detach()},this.updateLinkedFields=function(){var e=this.selectedTabstop;if(e.hasLinkedRanges){this.$inChange=!0;for(var i=this.editor.session,n=i.getTextRange(e.firstNonLinked),r=e.length;r--;){var o=e[r];if(o.linked){var s=t.snippetManager.tmStrFormat(n,o.original);i.replace(o,s)}}this.$inChange=!1}},this.onAfterExec=function(e){e.command&&!e.command.readOnly&&this.updateLinkedFields()},this.onChangeSelection=function(){if(this.editor){for(var e=this.editor.selection.lead,t=this.editor.selection.anchor,i=this.editor.selection.isEmpty(),n=this.ranges.length;n--;)if(!this.ranges[n].linked){var r=this.ranges[n].contains(e.row,e.column),o=i||this.ranges[n].contains(t.row,t.column);if(r&&o)return}this.detach()}},this.onChangeSession=function(){this.detach()},this.tabNext=function(e){var t=this.tabstops.length-1,i=this.index+(e||1);i=Math.min(Math.max(i,0),t),this.selectTabstop(i),i==t&&this.detach()},this.selectTabstop=function(e){var t=this.tabstops[this.index];if(t&&this.addTabstopMarkers(t),this.index=e,t=this.tabstops[this.index],t&&t.length){if(this.selectedTabstop=t,this.editor.inVirtualSelectionMode)this.editor.selection.setRange(t.firstNonLinked);else{var i=this.editor.multiSelect;i.toSingleRange(t.firstNonLinked.clone());for(var n=t.length;n--;)t.hasLinkedRanges&&t[n].linked||i.addRange(t[n].clone(),!0)}this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler)}},this.addTabstops=function(e,t,i){if(!e[0]){var r=n.fromPoints(i,i);c(r.start,t),c(r.end,t),e[0]=[r],e[0].index=0}var o=this.index,s=[o,0],u=this.ranges;this.editor,e.forEach(function(e){for(var i=e.length;i--;){var r=e[i],o=n.fromPoints(r.start,r.end||r.start);l(o.start,t),l(o.end,t),o.original=r,o.tabstop=e,u.push(o),e[i]=o,r.fmtString?(o.linked=!0,e.hasLinkedRanges=!0):e.firstNonLinked||(e.firstNonLinked=o)}e.firstNonLinked||(e.hasLinkedRanges=!1),s.push(e),this.addTabstopMarkers(e)},this),s.push(s.splice(2,1)[0]),this.tabstops.splice.apply(this.tabstops,s)},this.addTabstopMarkers=function(e){var t=this.editor.session;e.forEach(function(e){e.markerId||(e.markerId=t.addMarker(e,"ace_snippet-marker","text"))})},this.removeTabstopMarkers=function(e){var t=this.editor.session;e.forEach(function(e){t.removeMarker(e.markerId),e.markerId=null})},this.removeRange=function(e){var t=e.tabstop.indexOf(e);e.tabstop.splice(t,1),t=this.ranges.indexOf(e),this.ranges.splice(t,1),this.editor.session.removeMarker(e.markerId)},this.keyboardHandler=new r,this.keyboardHandler.bindKeys({Tab:function(e){e.tabstopManager.tabNext(1)},"Shift-Tab":function(e){e.tabstopManager.tabNext(-1)},Esc:function(e){e.tabstopManager.detach()},Return:function(){return!1}})}.call(a.prototype);var l=function(e,t){0==e.row&&(e.column+=t.column),e.row+=t.row},c=function(e,t){e.row==t.row&&(e.column-=t.column),e.row-=t.row};e("./lib/dom").importCssString(".ace_snippet-marker {    -moz-box-sizing: border-box;    box-sizing: border-box;    background: rgba(194, 193, 208, 0.09);    border: 1px dotted rgba(211, 208, 235, 0.62);    position: absolute;}"),t.snippetManager=new u}),ace.define("ace/autocomplete",["require","exports","module","ace/keyboard/hash_handler","ace/autocomplete/popup","ace/autocomplete/util","ace/lib/event","ace/lib/lang","ace/snippets"],function(e,t){var i=e("./keyboard/hash_handler").HashHandler,n=e("./autocomplete/popup").AcePopup,r=e("./autocomplete/util"),o=e("./lib/event"),s=e("./lib/lang"),u=e("./snippets").snippetManager,a=function(){this.keyboardHandler=new i,this.keyboardHandler.bindKeys(this.commands),this.blurListener=this.blurListener.bind(this),this.changeListener=this.changeListener.bind(this),this.mousedownListener=this.mousedownListener.bind(this),this.mousewheelListener=this.mousewheelListener.bind(this),this.changeTimer=s.delayedCall(function(){this.updateCompletions(!0)}.bind(this))};!function(){this.$init=function(){this.popup=new n(document.body||document.documentElement),this.popup.on("click",function(e){this.insertMatch(),e.stop()}.bind(this))},this.openPopup=function(e,t,i){this.popup||this.$init(),this.popup.setData(this.completions.filtered);var n=e.renderer;if(!i){this.popup.setFontSize(e.getFontSize());var r=n.layerConfig.lineHeight,o=n.$cursorLayer.getPixelPosition(this.base,!0);o.left-=this.popup.getTextLeftOffset();var s=e.container.getBoundingClientRect();o.top+=s.top-n.layerConfig.offset,o.left+=s.left,o.left+=n.$gutterLayer.gutterWidth,this.popup.show(o,r)}},this.detach=function(){this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler),this.editor.off("changeSelection",this.changeListener),this.editor.off("blur",this.changeListener),this.editor.off("mousedown",this.mousedownListener),this.editor.off("mousewheel",this.mousewheelListener),this.changeTimer.cancel(),this.popup&&this.popup.hide(),this.activated=!1,this.completions=this.base=null},this.changeListener=function(){var e=this.editor.selection.lead;(e.row!=this.base.row||e.column<this.base.column)&&this.detach(),this.activated?this.changeTimer.schedule():this.detach()},this.blurListener=function(){document.activeElement!=this.editor.textInput.getElement()&&this.detach()},this.mousedownListener=function(){this.detach()},this.mousewheelListener=function(){this.detach()},this.goTo=function(e){var t=this.popup.getRow(),i=this.popup.session.getLength()-1;switch(e){case"up":t=0>t?i:t-1;break;case"down":t=t>=i?-1:t+1;break;case"start":t=0;break;case"end":t=i}this.popup.setRow(t)},this.insertMatch=function(e){if(e||(e=this.popup.getData(this.popup.getRow())),!e)return!1;if(e.completer&&e.completer.insertMatch)e.completer.insertMatch(this.editor);else{if(this.completions.filterText)for(var t,i=this.editor.selection.getAllRanges(),n=0;t=i[n];n++)t.start.column-=this.completions.filterText.length,this.editor.session.remove(t);e.snippet?u.insertSnippet(this.editor,e.snippet):this.editor.execCommand("insertstring",e.value||e)}this.detach()},this.commands={Up:function(e){e.completer.goTo("up")},Down:function(e){e.completer.goTo("down")},"Ctrl-Up|Ctrl-Home":function(e){e.completer.goTo("start")},"Ctrl-Down|Ctrl-End":function(e){e.completer.goTo("end")},Esc:function(e){e.completer.detach()},Space:function(e){e.completer.detach(),e.insert(" ")},Return:function(e){e.completer.insertMatch()},"Shift-Return":function(e){e.completer.insertMatch(!0)},Tab:function(e){e.completer.insertMatch()},PageUp:function(e){e.completer.popup.gotoPageUp()},PageDown:function(e){e.completer.popup.gotoPageDown()}},this.gatherCompletions=function(e,t){var i=e.getSession(),n=e.getCursorPosition(),o=i.getLine(n.row),s=r.retrievePrecedingIdentifier(o,n.column);this.base=e.getCursorPosition(),this.base.column-=s.length;var u=[];return r.parForEach(e.completers,function(t,r){t.getCompletions(e,i,n,s,function(e,t){e||(u=u.concat(t)),r()})},function(){t(null,{prefix:s,matches:u})}),!0},this.showPopup=function(e){this.editor&&this.detach(),this.activated=!0,this.editor=e,e.completer!=this&&(e.completer&&e.completer.detach(),e.completer=this),e.keyBinding.addKeyboardHandler(this.keyboardHandler),e.on("changeSelection",this.changeListener),e.on("blur",this.blurListener),e.on("mousedown",this.mousedownListener),e.on("mousewheel",this.mousewheelListener),this.updateCompletions()},this.updateCompletions=function(e){if(e&&this.base&&this.completions){var t=this.editor.getCursorPosition(),i=this.editor.session.getTextRange({start:this.base,end:t});if(i==this.completions.filterText)return;return this.completions.setFilter(i),this.completions.filtered.length?(this.openPopup(this.editor,i,e),void 0):this.detach()}this.gatherCompletions(this.editor,function(t,i){var n=i&&i.matches;return n&&n.length?(this.completions=new l(n),this.completions.setFilter(i.prefix),this.completions.filtered.length?(this.openPopup(this.editor,i.prefix,e),void 0):this.detach()):this.detach()}.bind(this))},this.cancelContextMenu=function(){var e=function(t){this.editor.off("nativecontextmenu",e),t&&t.domEvent&&o.stopEvent(t.domEvent)}.bind(this);setTimeout(e,10),this.editor.on("nativecontextmenu",e)}}.call(a.prototype),a.startCommand={name:"startAutocomplete",exec:function(e){e.completer||(e.completer=new a),e.completer.showPopup(e),e.completer.cancelContextMenu()},bindKey:"Ctrl-Space|Ctrl-Shift-Space|Alt-Space"};var l=function(e,t){this.all=e,this.filtered=e,this.filterText=t||""};!function(){this.setFilter=function(e){if(e.length>this.filterText&&0===e.lastIndexOf(this.filterText,0))var t=this.filtered;else var t=this.all;this.filterText=e,t=this.filterCompletions(t,this.filterText),t=t.sort(function(e,t){return t.exactMatch-e.exactMatch||t.score-e.score});var i=null;t=t.filter(function(e){var t=e.value||e.caption||e.snippet;return t===i?!1:(i=t,!0)}),this.filtered=t},this.filterCompletions=function(e,t){var i=[],n=t.toUpperCase(),r=t.toLowerCase();e:for(var o,s=0;o=e[s];s++){var u=o.value||o.caption||o.snippet;if(u){for(var a,l,c=-1,h=0,d=0,g=0;g<t.length;g++){var m=u.indexOf(r[g],c+1),f=u.indexOf(n[g],c+1);if(a=m>=0?0>f||f>m?m:f:f,0>a)continue e;l=a-c-1,l>0&&(-1===c&&(d+=10),d+=l),h|=1<<a,c=a}o.matchMask=h,o.exactMatch=d?0:1,o.score=(o.score||0)-d,i.push(o)}}return i}}.call(l.prototype),t.Autocomplete=a,t.FilteredList=l}),ace.define("ace/autocomplete/popup",["require","exports","module","ace/edit_session","ace/virtual_renderer","ace/editor","ace/range","ace/lib/event","ace/lib/lang","ace/lib/dom"],function(e,t){var i=(e("../edit_session").EditSession,e("../virtual_renderer").VirtualRenderer),n=e("../editor").Editor,r=e("../range").Range,o=e("../lib/event"),s=e("../lib/lang"),u=e("../lib/dom"),a=function(e){var t=new i(e);t.$maxLines=4;var r=new n(t);return r.setHighlightActiveLine(!1),r.setShowPrintMargin(!1),r.renderer.setShowGutter(!1),r.renderer.setHighlightGutterLine(!1),r.$mouseHandler.$focusWaitTimout=0,r},l=function(e){var t=u.createElement("div"),i=new a(t);e&&e.appendChild(t),t.style.display="none",i.renderer.content.style.cursor="default",i.renderer.setStyle("ace_autocomplete"),i.setOption("displayIndentGuides",!1);var n=function(){};i.focus=n,i.$isFocused=!0,i.renderer.$cursorLayer.restartTimer=n,i.renderer.$cursorLayer.element.style.opacity=0,i.renderer.$maxLines=8,i.renderer.$keepTextAreaAtCursor=!1,i.setHighlightActiveLine(!1),i.session.highlight(""),i.session.$searchHighlight.clazz="ace_highlight-marker",i.on("mousedown",function(e){var t=e.getDocumentPosition();i.moveCursorToPosition(t),i.selection.clearSelection(),h.start.row=h.end.row=t.row,e.stop()});var l,c=new r(-1,0,-1,1/0),h=new r(-1,0,-1,1/0);h.id=i.session.addMarker(h,"ace_active-line","fullLine"),i.setSelectOnHover=function(e){e?c.id&&(i.session.removeMarker(c.id),c.id=null):c.id=i.session.addMarker(c,"ace_line-hover","fullLine")},i.setSelectOnHover(!1),i.on("mousemove",function(e){if(!l)return l=e,void 0;if(l.x!=e.x||l.y!=e.y){l=e,l.scrollTop=i.renderer.scrollTop;var t=l.getDocumentPosition().row;c.start.row!=t&&(c.id||i.setRow(t),g(t))}}),i.renderer.on("beforeRender",function(){if(l&&-1!=c.start.row){l.$pos=null;var e=l.getDocumentPosition().row;c.id||i.setRow(e),g(e,!0)}}),i.renderer.on("afterRender",function(){var e=i.getRow(),t=i.renderer.$textLayer,n=t.element.childNodes[e-t.config.firstRow];n!=t.selectedNode&&(t.selectedNode&&u.removeCssClass(t.selectedNode,"ace_selected"),t.selectedNode=n,n&&u.addCssClass(n,"ace_selected"))});var d=function(){g(-1)},g=function(e,t){e!==c.start.row&&(c.start.row=c.end.row=e,t||i.session._emit("changeBackMarker"),i._emit("changeHoverMarker"))};i.getHoveredRow=function(){return c.start.row},o.addListener(i.container,"mouseout",d),i.on("hide",d),i.on("changeSelection",d),i.session.doc.getLength=function(){return i.data.length},i.session.doc.getLine=function(e){var t=i.data[e];return"string"==typeof t?t:t&&t.value||""};var m=i.session.bgTokenizer;return m.$tokenizeRow=function(e){var t=i.data[e],n=[];if(!t)return n;"string"==typeof t&&(t={value:t}),t.caption||(t.caption=t.value);for(var r,o,s=-1,e=0;e<t.caption.length;e++)o=t.caption[e],r=t.matchMask&1<<e?1:0,s!==r?(n.push({type:t.className||""+(r?"completion-highlight":""),value:o}),s=r):n[n.length-1].value+=o;if(t.meta){var u=i.renderer.$size.scrollerWidth/i.renderer.layerConfig.characterWidth;t.meta.length+t.caption.length<u-2&&n.push({type:"rightAlignedText",value:t.meta})}return n},m.$updateOnChange=n,m.start=n,i.session.$computeWidth=function(){return this.screenWidth=0},i.data=[],i.setData=function(e){i.data=e||[],i.setValue(s.stringRepeat("\n",e.length),-1),i.setRow(0)},i.getData=function(e){return i.data[e]},i.getRow=function(){return h.start.row},i.setRow=function(e){e=Math.max(-1,Math.min(this.data.length,e)),h.start.row!=e&&(i.selection.clearSelection(),h.start.row=h.end.row=e||0,i.session._emit("changeBackMarker"),i.moveCursorTo(e||0,0),i.isOpen&&i._signal("select"))},i.hide=function(){this.container.style.display="none",this._signal("hide"),i.isOpen=!1},i.show=function(e,t){var n=this.container,r=window.innerHeight,o=this.renderer,s=1.4*o.$maxLines*t,u=e.top+this.$borderSize;u+s>r-t?(n.style.top="",n.style.bottom=r-u+"px"):(u+=t,n.style.top=u+"px",n.style.bottom=""),n.style.left=e.left+"px",n.style.display="",this.renderer.$textLayer.checkForSizeChanges(),this._signal("show"),l=null,i.isOpen=!0},i.getTextLeftOffset=function(){return this.$borderSize+this.renderer.$padding+this.$imageSize},i.$imageSize=0,i.$borderSize=1,i};u.importCssString(".ace_autocomplete.ace-tm .ace_marker-layer .ace_active-line {    background-color: #CAD6FA;    z-index: 1;}.ace_autocomplete.ace-tm .ace_line-hover {    border: 1px solid #abbffe;    margin-top: -1px;    background: rgba(233,233,253,0.4);}.ace_autocomplete .ace_line-hover {    position: absolute;    z-index: 2;}.ace_rightAlignedText {    color: gray;    display: inline-block;    position: absolute;    right: 4px;    text-align: right;    z-index: -1;}.ace_autocomplete .ace_completion-highlight{    color: #000;    text-shadow: 0 0 0.01em;}.ace_autocomplete {    width: 280px;    z-index: 200000;    background: #fbfbfb;    color: #444;    border: 1px lightgray solid;    position: fixed;    box-shadow: 2px 3px 5px rgba(0,0,0,.2);    line-height: 1.4;}"),t.AcePopup=l}),ace.define("ace/autocomplete/util",["require","exports","module"],function(e,t){t.parForEach=function(e,t,i){var n=0,r=e.length;0===r&&i();for(var o=0;r>o;o++)t(e[o],function(e,t){n++,n===r&&i(e,t)})};var i=/[a-zA-Z_0-9\$-]/;t.retrievePrecedingIdentifier=function(e,t,n){n=n||i;for(var r=[],o=t-1;o>=0&&n.test(e[o]);o--)r.push(e[o]);return r.reverse().join("")},t.retrieveFollowingIdentifier=function(e,t,n){n=n||i;for(var r=[],o=t;o<e.length&&n.test(e[o]);o++)r.push(e[o]);return r}}),ace.define("ace/autocomplete/text_completer",["require","exports","module","ace/range"],function(e,t){function i(e,t){var i=e.getTextRange(r.fromPoints({row:0,column:0},t));return i.split(o).length-1}function n(e,t){var n=i(e,t),r=e.getValue().split(o),s=Object.create(null),u=r[n];return r.forEach(function(e,t){if(e&&e!==u){var i=Math.abs(n-t),o=r.length-i;s[e]=s[e]?Math.max(o,s[e]):o}}),s}var r=e("ace/range").Range,o=/[^a-zA-Z_0-9\$\-]+/;t.getCompletions=function(e,t,i,r,o){var s=n(t,i,r),u=Object.keys(s);o(null,u.map(function(e){return{name:e,value:e,score:s[e],meta:"local"}}))}});